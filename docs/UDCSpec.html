<!DOCTYPE html>

<html>
<head>
  <title>UDCSpec.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="UDCSpec.html">
                UDCSpec.js
              </a>
            
              
              <a class="source" href="udc.html">
                udc.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>UDCSpec.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>Unit tests / User Guide for the UDC library.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>describe(<span class="hljs-string">'UDC'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
  <span class="hljs-keyword">var</span> UDC;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Use require.js to fetch the AMD module.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  it(<span class="hljs-string">"should load the AMD module"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(done)</span> {</span>
    <span class="hljs-built_in">require</span>([<span class="hljs-string">'udc'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(loadedModule)</span> {</span>
      UDC = loadedModule;
      done();
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h1 id="overview">Overview</h1>
<p>Concepts:</p>
<ul>
<li>universal elements<ul>
<li>dimension</li>
<li>member</li>
<li>code list</li>
<li>code</li>
<li>measure</li>
</ul>
</li>
<li>local elements<ul>
<li>table</li>
<li>concordance</li>
<li>cube</li>
<li>hierarchy</li>
</ul>
</li>
</ul>
<p>Tasks:</p>
<ul>
<li>load data cube</li>
<li>load concordance</li>
<li>merge data cubes</li>
<li>load hierarchy</li>
<li>merge hierarchies</li>
<li>query for values</li>
</ul>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h1 id="user-guide">User Guide</h1>
<p>The Universal Data Cube (UDC) library is for modeling data sets
as data cubes and integrating them together. The UDC has two kinds of elements:</p>
<ul>
<li>“universal elements” are shared by all data sets</li>
<li>“local elements” are local to each data set</li>
</ul>
<p>By establishing a relationship between local elements and universal elements, the
UDC library is able to integrate many data sets together that may:</p>
<ul>
<li>refer to the same entities using different identifiers, or</li>
<li>express the same numeric field using a different scale factor.</li>
</ul>
<h2 id="table">Table</h2>
<p>In the UDC library, the notion of a “table” is a set of <code>row</code> objects
(e.g. rows parsed from a CSV file) and some additional metadata that states 
how the row objects relate to universal elements.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> tables = {};

  tables.countryPopulations = {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <ul>
<li><code>table.rows</code> an array of <code>row</code> objects where<ul>
<li>Keys are column names</li>
<li>Values are numbers or strings</li>
</ul>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">"rows"</span>: [
      { <span class="hljs-string">"Country"</span>: <span class="hljs-string">"in"</span>, <span class="hljs-string">"Pop"</span>: <span class="hljs-number">1.237</span> },
      { <span class="hljs-string">"Country"</span>: <span class="hljs-string">"cn"</span>, <span class="hljs-string">"Pop"</span>: <span class="hljs-number">1.351</span> },
      { <span class="hljs-string">"Country"</span>: <span class="hljs-string">"us"</span>, <span class="hljs-string">"Pop"</span>: <span class="hljs-number">0.3139</span> }
    ],</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <ul>
<li><code>table.dimensionColumns</code> an array of <code>dimensionColumn</code> objects that 
describe how columns in the table relate to dimensions.<ul>
<li><code>column</code> the column name (key in <code>row</code> objects)</li>
<li><code>dimension</code> the name of the dimension</li>
<li><code>codeList</code> the name of the code list used by <code>row</code> objects.
For each <code>row</code> in <code>table.rows</code>, <code>row[column]</code> yields a string 
that is a code from this code list.</li>
</ul>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">"dimensionColumns"</span>: [
      {
        <span class="hljs-string">"column"</span>: <span class="hljs-string">"Country"</span>,
        <span class="hljs-string">"dimension"</span>: <span class="hljs-string">"Space"</span>,
        <span class="hljs-string">"codeList"</span>: <span class="hljs-string">"countryCode"</span>
      }
    ],</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <ul>
<li><code>table.measureColumns</code> an array of <code>measureColumn</code> objects that 
describe how columns in the table relate to measures.<ul>
<li><code>column</code> the column name (key in <code>row</code> objects)</li>
<li><code>measure</code> the name of the measure</li>
<li><code>scale</code> the scale factor used by values.
For each <code>row</code> in <code>table.rows</code>, <code>row[column]</code> yields a number <code>x</code> 
such that <br> <code>x * scale</code> yields the measure value.</li>
</ul>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-string">"measureColumns"</span>: [
      {
        <span class="hljs-string">"column"</span>: <span class="hljs-string">"Pop"</span>,
        <span class="hljs-string">"measure"</span>: <span class="hljs-string">"Population"</span>,
        <span class="hljs-string">"scale"</span>: <span class="hljs-number">1000000000</span>
      }
    ]
  };

  tables.countryNamesAndCodes = {
    <span class="hljs-string">"dimensionColumns"</span>: [
      { <span class="hljs-string">"dimension"</span>: <span class="hljs-string">"Space"</span>, <span class="hljs-string">"codeList"</span>: <span class="hljs-string">"countryName"</span>, <span class="hljs-string">"column"</span>: <span class="hljs-string">"Country"</span> },
      { <span class="hljs-string">"dimension"</span>: <span class="hljs-string">"Space"</span>, <span class="hljs-string">"codeList"</span>: <span class="hljs-string">"countryCode"</span>, <span class="hljs-string">"column"</span>: <span class="hljs-string">"Code"</span> }
    ],
    <span class="hljs-string">"rows"</span>: [
      { <span class="hljs-string">"Country"</span>: <span class="hljs-string">"India"</span>, <span class="hljs-string">"Code"</span>: <span class="hljs-string">"in"</span> },
      { <span class="hljs-string">"Country"</span>: <span class="hljs-string">"China"</span>, <span class="hljs-string">"Code"</span>: <span class="hljs-string">"cn"</span> },
      { <span class="hljs-string">"Country"</span>: <span class="hljs-string">"United States of America"</span>, <span class="hljs-string">"Code"</span>: <span class="hljs-string">"us"</span> }
    ]
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Tables are used as input for creating cubes and concordances.</p>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2 id="cube">Cube</h2>
<p>Data cubes are referred to as “cubes”.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  it(<span class="hljs-string">'can load a data cube'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> table = tables.countryPopulations,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><code>UDC.Cube(table)</code> is the constructor function for cubes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        cube = UDC.Cube(table),</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><code>cube.value(cell, measure)</code> queries the cube for values.</p>
<ul>
<li><code>cell</code> an object that specifies the combination of dimension 
members used to look up the value. A cell corresponds to a <code>row</code>
in the original table used to create the cube.<ul>
<li>Keys are dimension names</li>
<li>Values are <code>member</code> objects<ul>
<li><code>member.codeList</code> the code list used</li>
<li><code>member.code</code> the code for this member</li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        cell = {
          Space: {
            codeList: <span class="hljs-string">'countryCode'</span>,
            code: <span class="hljs-string">'in'</span>
          }
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <ul>
<li><code>measure</code> the measure name</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        measure = <span class="hljs-string">'Population'</span>,
        value = cube.value(cell, measure);

    expect(value).toBe(<span class="hljs-number">1.237</span> * <span class="hljs-number">1000000000</span>);
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="concordance">Concordance</h2>
<p>Concordance tables are referred to as “concordances”.</p>
<p>A concordance defines equivalence classes for two or more code lists.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  it(<span class="hljs-string">'can load a concordance'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">var</span> table = tables.countryNamesAndCodes,</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p><code>UDC.Concordance(table)</code> is the constructor function for concordances.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        concordance = UDC.Concordance(table);
  });


});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
